<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketplace</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Luxury Marketplace</h1>
        <input type="text" id="search-bar" placeholder="Search by category...">
        <button id="search-button">Search</button>
    </header>

    <section id="product-list">
        <h2>Available Products</h2>
        <div id="products-display"></div>
    </section>

    <section id="cart-section">
        <h2>Your Cart</h2>
        <div id="cart-display"></div>
        <button id="checkout-button">Checkout</button>
    </section>

    <script>
        const productsDisplay = document.getElementById('products-display');
const cartDisplay = document.getElementById('cart-display');
const searchButton = document.getElementById('search-button');
const searchBar = document.getElementById('search-bar');
const checkoutButton = document.getElementById('checkout-button');

let cart = [];

// Helper function to get all sellers
function getSellers() {
    return JSON.parse(localStorage.getItem('sellers')) || {};
}

// Function to display products in the marketplace
function displayProducts(filterCategory = '') {
    productsDisplay.innerHTML = ''; // Clear previous display
    const sellers = getSellers();

    Object.values(sellers).forEach(seller => {
        seller.products.forEach(product => {
            if (filterCategory && product.category.toLowerCase() !== filterCategory.toLowerCase()) {
                return; // Skip products that do not match the filter
            }
            const productHTML = `
                <div class="product-card">
                    <img src="${product.mainImage}" alt="${product.name}" class="product-image">
                    <h3>${product.name}</h3>
                    <p>Category: ${product.category}</p>
                    <p>Price: INR ${product.price}</p>
                    <button onclick="viewProduct('${product.name}', '${product.category}')">View Product</button>
                    <button onclick="addToCart('${product.name}')">Add to Cart</button>
                </div>
            `;
            productsDisplay.insertAdjacentHTML('beforeend', productHTML);
        });
    });
}

// Function to handle viewing product details
function viewProduct(productName, category) {
    const sellers = getSellers();
    const product = Object.values(sellers)
        .flatMap(seller => seller.products)
        .find(p => p.name === productName && p.category === category);

    if (product) {
        alert(`Product: ${product.name}\nDescription: ${product.description}\nDetails: ${product.details}\nPrice: INR ${product.price}`);
    }
}

// Function to add a product to the cart
function addToCart(productName) {
    const sellers = getSellers();
    const product = Object.values(sellers)
        .flatMap(seller => seller.products)
        .find(p => p.name === productName);

    if (product) {
        cart.push(product);
        alert(`${product.name} has been added to your cart.`);
        displayCart();
    }
}

// Function to display items in the cart
function displayCart() {
    cartDisplay.innerHTML = ''; // Clear previous cart display

    if (cart.length === 0) {
        cartDisplay.innerHTML = '<p>Your cart is empty.</p>';
        return;
    }

    cart.forEach((item, index) => {
        const cartHTML = `
            <div class="cart-item">
                <h3>${item.name}</h3>
                <p>Price: INR ${item.price}</p>
                <button onclick="removeFromCart(${index})">Remove</button>
            </div>
        `;
        cartDisplay.insertAdjacentHTML('beforeend', cartHTML);
    });
}

// Function to remove an item from the cart
function removeFromCart(index) {
    cart.splice(index, 1);
    displayCart();
}

// Event listener for search functionality
searchButton.addEventListener('click', function() {
    const filterCategory = searchBar.value.trim();
    displayProducts(filterCategory); // Re-display products based on search
});

// Event listener for checkout functionality
checkoutButton.addEventListener('click', function() {
    if (cart.length === 0) {
        alert('Your cart is empty.');
    } else {
        alert('Proceeding to checkout...');
        // Here you could implement checkout logic
    }
});

// Initial display of products
displayProducts();
    </script>
</body>
</html>
